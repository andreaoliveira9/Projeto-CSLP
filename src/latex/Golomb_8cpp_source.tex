\doxysection{Golomb.\+cpp}
\hypertarget{Golomb_8cpp_source}{}\label{Golomb_8cpp_source}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#include\ "{}Golomb.hpp"{}}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \mbox{\hyperlink{classGolomb_a63def34e7c1d82383edad1355d655331}{Golomb::Golomb}}(\mbox{\hyperlink{classBitStream}{BitStream}}*\ bitStream,\ \textcolor{keywordtype}{int}\ m)\ \{}
\DoxyCodeLine{00004\ \ \ \ \ this-\/>bitStream\ =\ \mbox{\hyperlink{classGolomb_a9c11d9994536a4869744ce5c96dcce15}{bitStream}};}
\DoxyCodeLine{00005\ \ \ \ \ this-\/>m\ =\ \mbox{\hyperlink{classGolomb_aea433fe3049440988ad1fa1a5eb536a3}{m}};}
\DoxyCodeLine{00006\ \}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \mbox{\hyperlink{classGolomb_a3695ea307f313060e2d2f7d32fc5fad9}{Golomb::\string~Golomb}}()\ \{}
\DoxyCodeLine{00009\ \}}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classGolomb_a3e0098310f29e44ec11e2429dcb561c6}{Golomb::encode}}(\textcolor{keywordtype}{int}\ value)\ \{}
\DoxyCodeLine{00012\ \ \ \ \ \textcolor{keywordtype}{int}\ sign\ =\ 1;\ \ }
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \ \ \ \ \textcolor{keywordflow}{if}\ (value\ <\ 0)\ \{}
\DoxyCodeLine{00015\ \ \ \ \ \ \ \ \ sign\ =\ -\/1;\ }
\DoxyCodeLine{00016\ \ \ \ \ \ \ \ \ value\ =\ -\/value;\ }
\DoxyCodeLine{00017\ \ \ \ \ \}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ q,\ r;}
\DoxyCodeLine{00020\ \ \ \ \ q\ =\ value\ /\ \mbox{\hyperlink{classGolomb_aea433fe3049440988ad1fa1a5eb536a3}{m}};}
\DoxyCodeLine{00021\ \ \ \ \ r\ =\ value\ \%\ \mbox{\hyperlink{classGolomb_aea433fe3049440988ad1fa1a5eb536a3}{m}};}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \ \ \ \ \mbox{\hyperlink{classGolomb_a9c11d9994536a4869744ce5c96dcce15}{bitStream}}-\/>\mbox{\hyperlink{classBitStream_adad2f010548549bc2d7696fa4f264886}{writeBit}}(sign\ <\ 0\ ?\ 1\ :\ 0);}
\DoxyCodeLine{00024\ \ \ \ \ }
\DoxyCodeLine{00025\ \ \ \ \ \textcolor{keywordtype}{int}\ parameterB\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(ceil(log2(this-\/>\mbox{\hyperlink{classGolomb_aea433fe3049440988ad1fa1a5eb536a3}{m}})));}
\DoxyCodeLine{00026\ \ \ \ \ \textcolor{keywordtype}{int}\ parameterL\ =\ pow(2,\ parameterB)\ -\/\ this-\/>\mbox{\hyperlink{classGolomb_aea433fe3049440988ad1fa1a5eb536a3}{m}};}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \ \ \ \ \textcolor{keywordflow}{if}\ (r\ <\ parameterL)\ \{}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classGolomb_a9c11d9994536a4869744ce5c96dcce15}{bitStream}}-\/>\mbox{\hyperlink{classBitStream_ab1854609ed30f4ecb6516060c2b7a31f}{writeNBits}}(r,\ parameterB\ -\/\ 1);}
\DoxyCodeLine{00030\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classGolomb_a9c11d9994536a4869744ce5c96dcce15}{bitStream}}-\/>\mbox{\hyperlink{classBitStream_ab1854609ed30f4ecb6516060c2b7a31f}{writeNBits}}(r\ +\ parameterL,\ parameterB);}
\DoxyCodeLine{00032\ \ \ \ \ \}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \ \ \ \ \textcolor{keywordflow}{while}\ (q-\/-\/)\ \{}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classGolomb_a9c11d9994536a4869744ce5c96dcce15}{bitStream}}-\/>\mbox{\hyperlink{classBitStream_adad2f010548549bc2d7696fa4f264886}{writeBit}}(1);}
\DoxyCodeLine{00036\ \ \ \ \ \}}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \ \ \ \ \mbox{\hyperlink{classGolomb_a9c11d9994536a4869744ce5c96dcce15}{bitStream}}-\/>\mbox{\hyperlink{classBitStream_adad2f010548549bc2d7696fa4f264886}{writeBit}}(0);}
\DoxyCodeLine{00039\ \}}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classGolomb_abfc8d58261fc9bcc5d5e2559aed4a288}{Golomb::decode}}()\ \{}
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{keywordtype}{int}\ sign\ =\ \mbox{\hyperlink{classGolomb_a9c11d9994536a4869744ce5c96dcce15}{bitStream}}-\/>\mbox{\hyperlink{classBitStream_a4bebf59fe9379dbdefb4647fdd2ddf01}{readBit}}()\ ==\ 1\ ?\ -\/1\ :\ 1;}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ q\ =\ 0,\ r,\ temporaryValue;}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{keywordtype}{int}\ parameterB\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(ceil(log2(this-\/>\mbox{\hyperlink{classGolomb_aea433fe3049440988ad1fa1a5eb536a3}{m}})));}
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{keywordtype}{int}\ parameterL\ =\ pow(2,\ parameterB)\ -\/\ this-\/>\mbox{\hyperlink{classGolomb_aea433fe3049440988ad1fa1a5eb536a3}{m}};}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \ \ \ \ temporaryValue\ =\ \mbox{\hyperlink{classGolomb_a9c11d9994536a4869744ce5c96dcce15}{bitStream}}-\/>\mbox{\hyperlink{classBitStream_a3019873a6213b65472e886ef00ffd941}{readNBits}}(parameterB\ -\/\ 1);}
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{keywordflow}{if}\ (temporaryValue\ ==\ -\/1)\ \{}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00052\ \ \ \ \ \}}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keywordflow}{if}\ (temporaryValue\ <\ parameterL)\ \{}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ r\ =\ temporaryValue;}
\DoxyCodeLine{00056\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ additionalBit\ =\ \mbox{\hyperlink{classGolomb_a9c11d9994536a4869744ce5c96dcce15}{bitStream}}-\/>\mbox{\hyperlink{classBitStream_a3019873a6213b65472e886ef00ffd941}{readNBits}}(1);}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (additionalBit\ ==\ -\/1)\ \{}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ temporaryValue\ =\ (temporaryValue\ <<\ 1)\ |\ additionalBit;}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ r\ =\ temporaryValue\ -\/\ parameterL;}
\DoxyCodeLine{00063\ \ \ \ \ \}}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{keywordtype}{int}\ tmp;}
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keywordflow}{while}\ ((tmp\ =\ \mbox{\hyperlink{classGolomb_a9c11d9994536a4869744ce5c96dcce15}{bitStream}}-\/>\mbox{\hyperlink{classBitStream_a4bebf59fe9379dbdefb4647fdd2ddf01}{readBit}}())\ ==\ 1)\ \{}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ q++;}
\DoxyCodeLine{00068\ \ \ \ \ \}}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{keywordflow}{if}\ (tmp\ ==\ -\/1)\ \{}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00072\ \ \ \ \ \}}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{keywordflow}{return}\ (q\ *\ \mbox{\hyperlink{classGolomb_aea433fe3049440988ad1fa1a5eb536a3}{m}}\ +\ r)\ *\ sign;}
\DoxyCodeLine{00075\ \}}

\end{DoxyCode}
